---
title: Nibiru Chain
tags: ["Decentralized", "Perpetual Futures", "Stablecoin", "AMM", "DEX", "Cosmos"]
---


Nibiru is the first decentralized, permissionless derivatives platform leveraging its own stablecoin and AMM on Cosmos. NIBI is the staking and utility token designed to facilitate governance of the protocol and bolster the stability of NUSD.

Author: Nibiru Labs  
Created: April 2022

#### Table of Contents

- [Introduction - Nibiru Chain](#introduction)  
- [Nibiru Perpetuals Exchange](#nibiru-perpetuals-exchange)  
- [Stablecoin](#stablecoin)  
- [Automated Treasury Management](#automated-treasury-management)  
- [Nibiru AMM](#nibiru-amm)  

# Introduction

The Cosmos ecosystem's independent, sovereign app-chains require liquidity and diversification of volatility to foster investment into new projects and create ecosystem growth. Nibiru fulfills this gap by giving ecosystem participants access to leverage through a suite of composbale, standalone protocols:

1. **Nibi-Perps**:  A perpetual futures exchange where users can take leveraged exposure and trade on a plethora of assets — completely on-chain, completely non-custodially, and with minimal gas fees.

2. **Nibi-Swap**: An automated market maker for multichain assets, giving users access to swaps, pools, and bonded liquidity gauges.

3. **Nibiru Stablecoin (NUSD)**: A two-token economic model, where NIBI is the staking and utility token for the protocol and NUSD is a capital-efficient, partially collateralized stablecoin for the protocol.

Nibiru is built with the [Cosmos-SDK](https://github.com/cosmos/cosmos-sdk) and communicates with other chains using the [Inter-Blockchain Communication (IBC)](https://github.com/cosmos/ibc) protocol. As the natural next step, Nibiru will upgrade to allow for CosmWasm smart contract deployment, enabling Nibiru to develop new tools and  evolve alongside the broader community. The rest of the documentation  details the interaction between Nibiru's dapps and how they drive value and utility of
the NIBI token.

### Two-token economic model

**NIBI** is the governance token for Nibiru used to stabilize NUSD. NIBI is volatile, accrues the value generated by the protocol and partially collateralizes NUSD.

**NUSD** is a price stable token with an elastic supply that adjusts based on market demand. NUSD is partially algorithmic and partially collateralized.

# Nibiru Perpetuals Exchange

Perps on Nibiru uses a constant product formula with no real assets stored inside. The tokens are sent to a clearing house, which stores the collateral in a vault and uses the AMM[^3] solely for price discovery. The AMM model uses virtual tokens in the constant product formula to calculate the price of the derivative allowing for the use of leverage and removing the need for liquidity providers. The protocol controls the funding payments in NUSD and actively monitors the liquidation and the management of the Ecosystem Fund. The protocol's intention is to solve the following problems prevalent in the decentralized perp marketplace.

Some of the open problems which Nibiru perps try to solve:

1. **Minimize latency during periods of high volatility**: Design a liquidation engine that minimizes latency by liquidating positions based on the index price rather than the mark price during periods of volatility[^4].

2. **Minimize the imbalance in open interest**: Formulate the correct AMM model; to minimize the imbalance between long and short open interest.

3. **Increase the number of unique traders on the platform** Enable traders, besides arbitrageurs and bots and minimize the ecosystem fund from taking the other side of the trades.

4. **Reduce the bleeding of the ecosystem fund**: The objective of the Nibiru protocol is make sure it keeps the funding rates of the listed perps at parity to all other futures perpetual exchanges and monitor the opportunity for arbitrageurs.

The perp protocol follows the standard:

1. **Settlement in NUSD** - Contracts are denominated and settled in NUSD, providing a versatile settlement currency across the stablecoin margined futures across all ecosystem.

2. **No Expiration Date** - You can hold positions without an expiry date.

3. **Clear Pricing Rules** - Each futures contract specifies the base asset's quantity delivered for a single contract. For instance, OSMO:NUSD, UMEE:NUSD and ATOM:NUSD futures contracts represent only one unit of its respective base asset, similar to spot markets.

For perps to function properly on Nibiru protocol

- **Funding payments**: Funding payments are used to incentivize traders to take long/short positions. A time-weighted average price from the DEX pool is taken to compute the mark price. The index price is derived from an oracle. Funding payments are calculated and exchanged amongst traders hourly on Nibiru.

- **Liquidations**: Using leverage traders use NUSD to borrow money from the exchange to purchase an asset.
  - When the value of that asset falls trader's losses begin to approach the value of the margin, and this puts the exchange at risk. To prevent the trader's position from being under-collateralized, the exchange will proactively liquidate your position.
  - Nibiru perps use partial liquidation activated by governance; where if the ratio between the asset value and the margin is above 2%, only a quarter of the position will be liquidated. Once the margin ratio falls to 7%, the total position is liquidated.
  - Liquidations are triggered by keeper bots, who earn 1.25% of the remaining position.

- **Perpetual Ecosystem Fund (PerpEF)**: To protect the perp protocol against unexpected events, Nibiru Protocol stores half of the revenue generated from trading fees in a fund called the **PerpEF**. **PerpEF** steps in to (*a*) Cover a loss from a bankrupt position that was not liquidated in time; (*b*) Pay the funding payments that could correct the skew between the long/short positions. The NIBI token is designed to facilitate and incentivize the governance of the derivatives protocol.

### Perp: NIBI Token

Holders who stake their NIBI tokens can vote on or propose new ideas to improve the perps protocol. 10%[^5] staked NIBI feeds into the ecosystem fund. The NIBI token acts as a backstop. If the **PerpEF** is unable to cover unexpected losses, the protocol will mint new NIBI tokens and immediately sell them for collateral to keep the system solvent.

NIBI holders vote on exchange improvements, parameter alterations, and new feature implementations, as well as chain updates and inflationary reward mechanisms. NIBI stakers enjoy a trading fee discount proportional to the amount staked.

30% of the trading fees on the Nibiru Perpetuals Exchange are distributed to the Ecosystem Fund. 15% are given to the commuinity as grant to promote decentralization. Buybacks are conducted with the remaining 55%, where the protocol will conduct monthly auction where the participants bid on the fees for that week with NIBI.

### Potential risks on Nibiru Perpetuals Exchange

Nibiru ecosystem is built to promote robust decentralization, permissionless creation of perps. Community members can start trading without the supervision of a central authority. New market proposals will require governance approval for listing and a listing fee in NIBI tokens.

The permissionless state of market creation can drive the protocol to in-solvency. Nibiru doesn't want risk of one market to spill over to other markets, it requires each new pair to establish an ecosystem fund before trading is allowed to commence.

Each perp pair will be backed by separate backstop pools with NIBI/NUSD ready to compensate for any deficit caused by market volatility. After NIBI underwriters set up the fund, users can contribute to the pool with their collateral tokens and benefit from the liquidation proceeds.

# Stablecoin

Nibiru implements a fractional-algorithmic stablecoin NUSD[^6] both partially back the stablecoin. NIBI serves as a volatility absorbing seigniorage asset and gives NUSD greater capacity for scaling since the system requires less exogenous collateral to grow.

Nibiru adjusts the Collateral Ratio[^7] based on changes in a growth ratio which measures NIBI liquidity against the total supply of NUSD. As the growth ratio of NUSD increases, NIBI liquidity must increase relative to the supply of NUSD, more NUSD can be redeemed with less of a percentage impact on NIBI supply. So, the system can absorb more NIBI sell pressure from NUSD redemptions being sold without risking negative feedback loops.

Nibiru deploys a stability mechanism whereby changes in NUSD supply and NIBI liquidity adapt to the changes in the market and control the amount of endogenous collateral backing the system. During sustained periods of net growth ratio change, the market essentially expresses confidence in the endogenous collateral and signals to the protocol that the CR should be lower to better facilitate scaling.

Nibiru protocol makes the arbitragers come into situations:

- Decollateralize: lower the CR by [^8] every time NUSD $\gt$ \$1; (*b*) don't change the CR if NUSD=\$1;
- Recollateralize: increase CR if NUSD $\lt$ \$1; burn NIBI with minted unbacked NUSD, extra collateral, and fees.

The total value of assets locked in the Nibiru ecosystem will always be less than or equal to the NUSD market cap, so NUSD can more easily adapt to the pace of increasing stablecoin demand. During sustained periods of net negative growth ratio change, the market signals that more exogenous collateral should back the system and that the protocol should become more robust against destabilization risks. The exogenous collateral within the system dampens the reflexive downward spirals that are more likely to occur in systems entirely reliant upon endogenous collateral.

The worst-case scenario for NUSD would be if the CR rapidly spiked from a low to high percentage right before an event in which the NIBI market cap plummets, triggering a bank run. Then, a certain percentage of NUSD holders could drain all the collateral from the system through redemptions, leaving the remaining holders with improperly collateralized NUSD. While this scenario is theoretically possible, it's unlikely. The CR isn't designed to rapidly fluctuate so there won't be extended opportunities in which the CR vastly exceeds the actual percentage of collateral in the system.

The stability mechanism for NUSD can become more sophisticated over time, with the system's responsiveness to market information. A CR = 0% assumes the market has complete confidence in the endogenous collateral and no desire for the ability to redeem exogenous collateral. A CR of 100% assumes the market has zero confidence in endogenous collateral and hinders growth. Nibiru would implement dynamically adjust CR with the growth of the protocol and the emergent market intelligence.

### Automated Treasury Management

NUSD will implement Automated Treasury Management (ATM), to deploy the whitelisted exogenous collateral from NUSD minting into various strategies, while maximizing the core stability mechanism, formalizing the accounting of the balance sheet, defining how much NIBI can be bought and burned with profits above that CR. The ATM framework would enable the deployment of the NUSD into an arbitrarily large set of strategies to generate revenue, upgrade the system, and enable partnerships -- all without undermining the price stability of NUSD.

Active ATM would control the NUSD monetary policy and deploy successful strategies:

- **Investor ATM** will deploy NUSD whitelisted collateral to yield aggregators and money markets. The ATM will allocate funds into strategies that have a time delay for withdrawals, so it never lowers the CR and can pull out the collateral if needed for NUSD redemptions;
- **DEX ATM** will deploy idle and newly minted NUSD into the NIBI-NUSD pool. NUSD will utilize this DEX ATM to earn revenue and increase NUSD liquidity as well as strengthen its peg. Nibiru protocol will create the NIBI-NUSD pool setting the parameters of the pool. The ATM would build incentive structure to maximize the LP rewards;
- **Lending ATM** would let the borrowing of over-collateralized NUSD into money markets gives the ATM the ability to increase/decrease NUSD interest rates through minting and burning. This ATM would control the NUSD adoption by offering highly competitive borrowing rates;
- **Liquidation ATM** would let the deployment of NUSD to capture the yield from liquidation from the perp and the lending protocols integrated on Nibiru.

The modular design of the ATMs based on its current state makes NUSD highly adaptive to the market conditions. Nibiru protocol will invest the excess collateral with ATM strategies to increase stability and incentivize adoption of NUSD. NUSD will start with whitelisting IBC assets like UST. Eventually NUSD will utilize a basket of other stablecoins to maximize the decentralization ratio (extent to how much decentralized stablecoin system is dependent upon centralized components).

# Nibiru AMM

Nibiru AMM will use the generalized constant product function. The AMM is a value function which enforces that the product of the asset balances raised to the asset weight in the pool should always remain constant. In the formula, $t$ represents the number of assets in the pool, $\mathcal{Q}_t$ is the quantity of the asset, and $\mathcal{W}_t$ is the asset weight.

<!-- $\mathcal{Q}_1^{W_1} \times \mathcal{Q}_2^{W_2} \times \cdots \times \mathcal{Q}_t^{W_t} = k$ -->
<div style="text-align:center">
<img style="transform: translateY(0.1em); background: white;" src="https://render.githubusercontent.com/render/math?math=%5Cmathcal%7BQ%7D_1%5E%7BW_1%7D%20%5Ctimes%20%5Cmathcal%7BQ%7D_2%5E%7BW_2%7D%20%5Ctimes%20%5Ccdots%20%5Ctimes%20%5Cmathcal%7BQ%7D_t%5E%7BW_t%7D%20%3D%20k" height=25>
</div>

Nibiru takes the values in and computes $k$: The goal is to keep $k$ constant by only changing the asset balances while keeping the asset weights constant. Each pair of tokens in the pool has a price that is dependent on the balance $\mathcal{Q}$ and weight $\mathcal{W}$ for that specific pair.

Formally, the price that the swap executes at is computed as the ratio of the token balances normalized by the token weight:

<!-- $Price = \frac{\mathcal{A}_b/\mathcal{A}_w}{\mathcal{B}_b/\mathcal{B}_w}$ -->
<div style="text-align:center">
<img style="transform: translateY(0.1em); background: white;" src="https://render.githubusercontent.com/render/math?math=\text{Price}%20%3D%20%5Cfrac%7B%5Cmathcal%7BA%7D_b%2F%5Cmathcal%7BA%7D_w%7D%7B%5Cmathcal%7BB%7D_b%2F%5Cmathcal%7BB%7D_w%7D" height=40>
</div>

```python
weighted_amt1 = (amt1 / weight1)
weighted_amt0 = (amt0 / weight0)
price = weighted_amt1 / weighted_amt0 
```

Here, `amt0` and `amt1` represent the reserves of `token0` and `token1`. represents the token being sold (going into the pool) while token $\mathcal{B}$ is the token being bought (going out of the pool). If the pool owner doesn't modify the asset reserves, it is easy to see that the price changes solely based on trades since the asset weights must always remain constant. Equation  ensures that the price of the asset bought increases while the price of the asset sold decreases. The arbitrage opportunities guarantee that the prices offered by the pools in  move in conjunction with the rest of the market.

[^1]: Perpetual futures aka perpetual swaps or \"perps\" colloquially
    were first proposed by Robert Shiller in 1992 but only became
    popular when introduced to cryptocurrency markets in 2016 by BitMEX.

[^2]: https://www.theblockcrypto.com/data/decentralized-finance/dex-non-custodial/dex-to-cex-spot-trade-volume

[^3]: AMM here refers to the $x-y-k$ model pioneered by Uniswap

[^4]: During periods of volatility, generally arbitrageurs cannot
    provide liquidity as well as adjust their margin

[^5]: The parameter is open for governance

[^6]: For launch, we whitelist UST as the exogenous and NIBI as
    endogenous collateral

[^7]: The Collateral Ratio (CR) determines what ratio of exogenous and
    endogenous collateral is necessary to mint or redeem NUSD. If the CR
    is 95%, then minting 1 NUSD requires depositing \$0.85 UST as well
    as burning \$0.15 worth of NIBI.

[^8]: is a governance listed step
